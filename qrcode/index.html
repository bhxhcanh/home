<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Công cụ QR Code - Công cụ trực tuyến</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="../assets/style.css">
  <link rel="stylesheet" href="style.css">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZS5G3PWFSD"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HBQE75RM9F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZS5G3PWFSD');
</script>
</head>
<body>

  <!-- Authentication Modal -->
  <div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="authModalLabel">Đăng nhập</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Login Form -->
          <div id="loginForm">
            <div class="mb-3">
              <label for="loginEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="loginEmail" autocomplete="email">
            </div>
            <div class="mb-3">
              <label for="loginPassword" class="form-label">Mật khẩu</label>
              <input type="password" class="form-control" id="loginPassword" autocomplete="current-password">
            </div>
            <button class="btn btn-primary w-100" onclick="handleLogin()">Đăng nhập</button>
            <div class="d-flex justify-content-between mt-2">
              <a href="#" class="btn btn-link" onclick="showAuthForm('forgotForm')">Quên mật khẩu?</a>
              <a href="#" class="btn btn-link" onclick="showAuthForm('registerForm')">Đăng ký</a>
            </div>
            <div id="loginMessage" class="mt-3 text-danger"></div>
          </div>

          <!-- Register Form -->
          <div id="registerForm" class="hidden">
            <h5 class="mb-3">Đăng ký</h5>
            <div class="mb-3">
              <label for="regEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="regEmail" autocomplete="email">
            </div>
            <div class="mb-3">
              <label for="regPassword" class="form-label">Mật khẩu</label>
              <input type="password" class="form-control" id="regPassword" autocomplete="new-password">
            </div>
            <div class="mb-3">
              <label for="regPasswordConfirm" class="form-label">Xác nhận mật khẩu</label>
              <input type="password" class="form-control" id="regPasswordConfirm" autocomplete="new-password">
            </div>
            <button class="btn btn-success w-100" onclick="handleRegistrationRequest()">Đăng ký</button>
            <a href="#" class="btn btn-link d-block mt-2" onclick="showAuthForm('loginForm')">Quay lại đăng nhập</a>
            <div id="registerMessage" class="mt-3 text-danger"></div>
          </div>
          
          <!-- Register OTP Form -->
          <div id="registerOtpForm" class="hidden">
              <h5 class="mb-3">Xác thực đăng ký</h5>
              <p class="text-muted small">Một mã OTP đã được gửi đến email <strong id="registerOtpEmailDisplay"></strong>. Vui lòng nhập mã đó để hoàn tất.</p>
              <div class="mb-3">
                  <label for="registerOtpCode" class="form-label">Mã OTP</label>
                  <input type="text" class="form-control" id="registerOtpCode" inputmode="numeric" autocomplete="one-time-code">
              </div>
              <button class="btn btn-primary w-100" onclick="handleCompleteRegistration()">Xác thực &amp; Hoàn tất</button>
              <a href="#" class="btn btn-link d-block mt-2" onclick="showAuthForm('registerForm')">Quay lại</a>
              <div id="registerOtpMessage" class="mt-3"></div>
          </div>

          <!-- Forgot Password Form -->
          <div id="forgotForm" class="hidden">
              <h5 class="mb-3">Quên mật khẩu</h5>
              <div class="mb-3">
                  <label for="forgotEmail" class="form-label">Nhập email của bạn</label>
                  <input type="email" class="form-control" id="forgotEmail" autocomplete="email">
              </div>
              <button class="btn btn-warning w-100" onclick="handleForgot()">Gửi OTP</button>
              <a href="#" class="btn btn-link d-block mt-2" onclick="showAuthForm('loginForm')">Quay lại đăng nhập</a>
              <div id="forgotMessage" class="mt-3"></div>
          </div>

          <!-- Reset Password Form -->
          <div id="resetForm" class="hidden">
              <h5 class="mb-3">Đặt lại mật khẩu</h5>
              <p class="text-muted small">Một mã OTP đã được gửi đến email <strong id="resetEmailDisplay"></strong>. Vui lòng nhập mã đó bên dưới.</p>
              <div class="mb-3">
                  <label for="otpCode" class="form-label">Mã OTP</label>
                  <input type="text" class="form-control" id="otpCode" inputmode="numeric" autocomplete="one-time-code">
              </div>
              <div class="mb-3">
                  <label for="newPassword" class="form-label">Mật khẩu mới</label>
                  <input type="password" class="form-control" id="newPassword" autocomplete="new-password">
              </div>
              <button class="btn btn-info w-100" onclick="handleResetPassword()">Đặt lại mật khẩu</button>
              <div id="resetMessage" class="mt-3"></div>
               <div class="d-flex justify-content-between align-items-center mt-3">
                  <div id="resendOtpContainer" class="text-muted small">
                      <!-- JS will populate this -->
                  </div>
                  <a href="#" class="btn btn-link btn-sm" onclick="showAuthForm('loginForm')">Quay lại đăng nhập</a>
              </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
  
  <!-- Change Password Modal -->
  <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="changePasswordModalLabel">Đổi mật khẩu</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="currentPassword" class="form-label">Mật khẩu hiện tại</label>
            <input type="password" class="form-control" id="currentPassword" autocomplete="current-password">
          </div>
          <div class="mb-3">
            <label for="changeNewPassword" class="form-label">Mật khẩu mới</label>
            <input type="password" class="form-control" id="changeNewPassword" autocomplete="new-password">
          </div>
          <div class="mb-3">
            <label for="confirmNewPassword" class="form-label">Xác nhận mật khẩu mới</label>
            <input type="password" class="form-control" id="confirmNewPassword" autocomplete="new-password">
          </div>
          <div id="changePasswordMessage" class="mt-3"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
          <button type="button" class="btn btn-primary" onclick="handleChangePassword()">Lưu thay đổi</button>
        </div>
      </div>
    </div>
  </div>

  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="/">Công cụ trực tuyến</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="mainNavItems">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Công cụ QR Code</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../photo/index.html">Chỉnh sửa ảnh</a>
          </li>
        </ul>
        <div class="d-flex align-items-center ms-auto">
          <div id="userActions">
            <!-- Populated by JS -->
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="container-fluid mt-3">
    <div class="qrcode-app-wrapper">
      <div class="container">
          <h1>Công cụ mã QR Code</h1>
          <p>Chọn chức năng bạn muốn sử dụng.</p>
          
          <!-- QR Type Selection Tabs -->
          <ul class="nav nav-pills nav-fill mb-3" id="qr-type-pills" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="qr-text-tab" data-bs-toggle="pill" data-bs-target="#qr-text-pane" type="button" role="tab" aria-controls="qr-text-pane" aria-selected="true"><i class="bi bi-fonts me-2"></i><span>Tạo: Văn bản</span></button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="qr-url-tab" data-bs-toggle="pill" data-bs-target="#qr-url-pane" type="button" role="tab" aria-controls="qr-url-pane" aria-selected="false"><i class="bi bi-link-45deg me-2"></i><span>Tạo: URL</span></button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="qr-wifi-tab" data-bs-toggle="pill" data-bs-target="#qr-wifi-pane" type="button" role="tab" aria-controls="qr-wifi-pane" aria-selected="false"><i class="bi bi-wifi me-2"></i><span>Tạo: WiFi</span></button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="qr-vcard-tab" data-bs-toggle="pill" data-bs-target="#qr-vcard-pane" type="button" role="tab" aria-controls="qr-vcard-pane" aria-selected="false"><i class="bi bi-person-badge me-2"></i><span>Tạo: Danh thiếp</span></button>
            </li>
             <li class="nav-item" role="presentation">
              <button class="nav-link" id="qr-read-tab" data-bs-toggle="pill" data-bs-target="#qr-read-pane" type="button" role="tab" aria-controls="qr-read-pane" aria-selected="false"><i class="bi bi-upc-scan me-2"></i><span>Đọc Mã QR</span></button>
            </li>
          </ul>

          <!-- QR Type Content Panes -->
          <div class="tab-content pt-2" id="qr-pills-content">
            <!-- Text Pane -->
            <div class="tab-pane fade show active" id="qr-text-pane" role="tabpanel" aria-labelledby="qr-text-tab">
              <textarea id="qr-text-input" class="form-control" rows="4" placeholder="Nhập văn bản của bạn ở đây..."></textarea>
            </div>
            <!-- URL Pane -->
            <div class="tab-pane fade" id="qr-url-pane" role="tabpanel" aria-labelledby="qr-url-tab">
              <input type="url" id="qr-url-input" class="form-control" placeholder="https://www.example.com">
            </div>
            <!-- WiFi Pane -->
            <div class="tab-pane fade" id="qr-wifi-pane" role="tabpanel" aria-labelledby="qr-wifi-tab">
                <div class="mb-2">
                    <input type="text" id="qr-wifi-ssid" class="form-control" placeholder="Tên mạng WiFi (SSID)">
                </div>
                <div class="mb-2">
                    <input type="password" id="qr-wifi-password" class="form-control" placeholder="Mật khẩu">
                </div>
                <select id="qr-wifi-encryption" class="form-select">
                    <option value="WPA" selected>WPA/WPA2</option>
                    <option value="WEP">WEP</option>
                    <option value="nopass">Không mã hoá</option>
                </select>
            </div>
            <!-- vCard Pane -->
            <div class="tab-pane fade" id="qr-vcard-pane" role="tabpanel" aria-labelledby="qr-vcard-tab">
                <div class="row g-2">
                    <div class="col-md-12 mb-2">
                         <input type="text" id="qr-vcard-name" class="form-control" placeholder="Họ và Tên">
                    </div>
                    <div class="col-md-6 mb-2">
                         <input type="tel" id="qr-vcard-phone" class="form-control" placeholder="Số điện thoại">
                    </div>
                    <div class="col-md-6 mb-2">
                         <input type="email" id="qr-vcard-email" class="form-control" placeholder="Email">
                    </div>
                     <div class="col-md-12">
                         <input type="text" id="qr-vcard-org" class="form-control" placeholder="Tổ chức/Công ty">
                    </div>
                </div>
            </div>
            <!-- QR Reader Pane -->
            <div class="tab-pane fade" id="qr-read-pane" role="tabpanel" aria-labelledby="qr-read-tab">
              <div id="qr-reader-uploader" class="upload-label-qr">
                <label for="qr-upload-input" class="upload-label-internal">
                  <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                  <span>Nhấp để tải lên hoặc kéo &amp; thả ảnh QR</span>
                </label>
                <input type="file" id="qr-upload-input" accept="image/*" class="hidden-input"/>
              </div>
              <div id="qr-reader-result-container" style="display: none;">
                  <h4>Nội dung mã QR:</h4>
                  <pre id="qr-reader-result-text"></pre>
              </div>
            </div>
          </div>

          <button id="generate-btn" class="btn btn-primary w-100 mt-4">Tạo mã QR</button>
          <div id="qrcode-container" class="qrcode-container"></div>
          <p id="status-message"></p>
      </div>
    </div>
    <div class="tool-description mt-5 p-4 bg-light rounded">
      <h2 class="h4">Giới thiệu Công cụ Mã QR Đa Năng</h2>
      <p>Công cụ mã QR của chúng tôi là một giải pháp toàn diện, miễn phí và dễ sử dụng cho mọi nhu cầu liên quan đến QR code. Dù bạn cần <strong>tạo mã QR</strong> cho chiến dịch marketing, chia sẻ thông tin cá nhân, hay đơn giản là <strong>đọc mã QR</strong> từ một hình ảnh, chúng tôi đều có thể đáp ứng.</p>
      <h3 class="h5 mt-3">Các tính năng chính:</h3>
      <ul>
        <li><strong>Tạo mã QR cho Văn bản:</strong> Chuyển đổi bất kỳ đoạn văn bản, ghi chú, hoặc tin nhắn nào thành mã QR một cách nhanh chóng.</li>
        <li><strong>Tạo mã QR cho URL/Link:</strong> Dễ dàng tạo QR code để chia sẻ liên kết website, trang sản phẩm, hoặc mạng xã hội.</li>
        <li><strong>Tạo mã QR WiFi:</strong> Giúp bạn bè và khách hàng kết nối vào mạng WiFi của bạn chỉ với một lần quét, không cần nhập mật khẩu.</li>
        <li><strong>Tạo mã QR Danh thiếp (vCard):</strong> Tạo danh thiếp kỹ thuật số chứa thông tin liên hệ (tên, số điện thoại, email) để chia sẻ một cách chuyên nghiệp.</li>
        <li><strong>Đọc mã QR từ ảnh:</strong> Bạn có một ảnh chứa mã QR? Chỉ cần tải ảnh lên, công cụ của chúng tôi sẽ <strong>quét và giải mã nội dung QR</strong> ngay lập tức.</li>
      </ul>
      <p>Đây là công cụ QR trực tuyến hoàn hảo cho cá nhân, doanh nghiệp nhỏ và các nhà tiếp thị muốn tận dụng sức mạnh của mã QR một cách hiệu quả và an toàn.</p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qr-creator/dist/qr-creator.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="../assets/script.js"></script>
  <script src="script.js"></script>
</body>
</html>