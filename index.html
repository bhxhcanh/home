<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Công cụ trực tuyến</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="assets/style.css">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZS5G3PWFSD"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HBQE75RM9F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZS5G3PWFSD');
</script>
</head>
<body>

  <!-- Authentication Modal -->
  <div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="authModalLabel">Đăng nhập</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Login Form -->
          <div id="loginForm">
            <div class="mb-3">
              <label for="loginEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="loginEmail" autocomplete="email">
            </div>
            <div class="mb-3">
              <label for="loginPassword" class="form-label">Mật khẩu</label>
              <input type="password" class="form-control" id="loginPassword" autocomplete="current-password">
            </div>
            <button class="btn btn-primary w-100" onclick="handleLogin()">Đăng nhập</button>
            <div class="d-flex justify-content-between mt-2">
              <a href="#" class="btn btn-link" onclick="showAuthForm('forgotForm')">Quên mật khẩu?</a>
              <a href="#" class="btn btn-link" onclick="showAuthForm('registerForm')">Đăng ký</a>
            </div>
            <div id="loginMessage" class="mt-3 text-danger"></div>
          </div>

          <!-- Register Form -->
          <div id="registerForm" class="hidden">
            <h5 class="mb-3">Đăng ký</h5>
            <div class="mb-3">
              <label for="regEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="regEmail" autocomplete="email">
            </div>
            <div class="mb-3">
              <label for="regPassword" class="form-label">Mật khẩu</label>
              <input type="password" class="form-control" id="regPassword" autocomplete="new-password">
            </div>
            <div class="mb-3">
              <label for="regPasswordConfirm" class="form-label">Xác nhận mật khẩu</label>
              <input type="password" class="form-control" id="regPasswordConfirm" autocomplete="new-password">
            </div>
            <button class="btn btn-success w-100" onclick="handleRegistrationRequest()">Đăng ký</button>
            <a href="#" class="btn btn-link d-block mt-2" onclick="showAuthForm('loginForm')">Quay lại đăng nhập</a>
            <div id="registerMessage" class="mt-3 text-danger"></div>
          </div>
          
          <!-- Register OTP Form -->
          <div id="registerOtpForm" class="hidden">
              <h5 class="mb-3">Xác thực đăng ký</h5>
              <p class="text-muted small">Một mã OTP đã được gửi đến email <strong id="registerOtpEmailDisplay"></strong>. Vui lòng nhập mã đó để hoàn tất.</p>
              <div class="mb-3">
                  <label for="registerOtpCode" class="form-label">Mã OTP</label>
                  <input type="text" class="form-control" id="registerOtpCode" inputmode="numeric" autocomplete="one-time-code">
              </div>
              <button class="btn btn-primary w-100" onclick="handleCompleteRegistration()">Xác thực &amp; Hoàn tất</button>
              <a href="#" class="btn btn-link d-block mt-2" onclick="showAuthForm('registerForm')">Quay lại</a>
              <div id="registerOtpMessage" class="mt-3"></div>
          </div>

          <!-- Forgot Password Form -->
          <div id="forgotForm" class="hidden">
              <h5 class="mb-3">Quên mật khẩu</h5>
              <div class="mb-3">
                  <label for="forgotEmail" class="form-label">Nhập email của bạn</label>
                  <input type="email" class="form-control" id="forgotEmail" autocomplete="email">
              </div>
              <button class="btn btn-warning w-100" onclick="handleForgot()">Gửi OTP</button>
              <a href="#" class="btn btn-link d-block mt-2" onclick="showAuthForm('loginForm')">Quay lại đăng nhập</a>
              <div id="forgotMessage" class="mt-3"></div>
          </div>

          <!-- Reset Password Form -->
          <div id="resetForm" class="hidden">
              <h5 class="mb-3">Đặt lại mật khẩu</h5>
              <p class="text-muted small">Một mã OTP đã được gửi đến email <strong id="resetEmailDisplay"></strong>. Vui lòng nhập mã đó bên dưới.</p>
              <div class="mb-3">
                  <label for="otpCode" class="form-label">Mã OTP</label>
                  <input type="text" class="form-control" id="otpCode" inputmode="numeric" autocomplete="one-time-code">
              </div>
              <div class="mb-3">
                  <label for="newPassword" class="form-label">Mật khẩu mới</label>
                  <input type="password" class="form-control" id="newPassword" autocomplete="new-password">
              </div>
              <button class="btn btn-info w-100" onclick="handleResetPassword()">Đặt lại mật khẩu</button>
              <div id="resetMessage" class="mt-3"></div>
               <div class="d-flex justify-content-between align-items-center mt-3">
                  <div id="resendOtpContainer" class="text-muted small">
                      <!-- JS will populate this -->
                  </div>
                  <a href="#" class="btn btn-link btn-sm" onclick="showAuthForm('loginForm')">Quay lại đăng nhập</a>
              </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
  
  <!-- Change Password Modal -->
  <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="changePasswordModalLabel">Đổi mật khẩu</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="currentPassword" class="form-label">Mật khẩu hiện tại</label>
            <input type="password" class="form-control" id="currentPassword" autocomplete="current-password">
          </div>
          <div class="mb-3">
            <label for="changeNewPassword" class="form-label">Mật khẩu mới</label>
            <input type="password" class="form-control" id="changeNewPassword" autocomplete="new-password">
          </div>
          <div class="mb-3">
            <label for="confirmNewPassword" class="form-label">Xác nhận mật khẩu mới</label>
            <input type="password" class="form-control" id="confirmNewPassword" autocomplete="new-password">
          </div>
          <div id="changePasswordMessage" class="mt-3"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
          <button type="button" class="btn btn-primary" onclick="handleChangePassword()">Lưu thay đổi</button>
        </div>
      </div>
    </div>
  </div>

  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="/">Công cụ trực tuyến</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="mainNavItems">
          <li class="nav-item">
            <a class="nav-link" href="qrcode/index.html">Công cụ QR Code</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="photo/index.html">Chỉnh sửa ảnh</a>
          </li>
        </ul>
        <div class="d-flex align-items-center ms-auto">
          <div id="userActions">
            <!-- Populated by JS -->
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="px-4 py-5 my-5 text-center">
      <h1 class="display-5 fw-bold text-body-emphasis">Bộ công cụ trực tuyến</h1>
      <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">Chào mừng bạn đến với bộ sưu tập các công cụ hữu ích, miễn phí và hoạt động ngay trên trình duyệt. Chọn một công cụ bên dưới để bắt đầu.</p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><i class="bi bi-qr-code-scan me-2"></i>Công cụ Mã QR</h5>
            <p class="card-text flex-grow-1">Tạo và đọc mã QR cho văn bản, URL, WiFi, danh thiếp vCard một cách nhanh chóng và dễ dàng.</p>
            <a href="qrcode/index.html" class="btn btn-primary mt-auto">Sử dụng ngay</a>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><i class="bi bi-image me-2"></i>Trình Chỉnh sửa ảnh</h5>
            <p class="card-text flex-grow-1">Thực hiện các thao tác chỉnh sửa ảnh cơ bản như cắt, xoay, thay đổi kích thước, và làm mờ thông tin nhạy cảm.</p>
            <a href="photo/index.html" class="btn btn-primary mt-auto">Sử dụng ngay</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/script.js"></script>
</body>
</html>
