<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Công cụ trực tuyến</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="assets/style.css">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZS5G3PWFSD"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HBQE75RM9F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZS5G3PWFSD');
</script>
</head>
<body>

  <!-- Authentication Modal -->
  <div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title fw-bold" id="authModalLabel">Chào mừng trở lại</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body pt-2" id="authModalBody">
          
          <!-- Tabs Navigation -->
          <ul class="nav nav-pills nav-fill mb-4" id="authTabNav">
            <li class="nav-item">
              <button class="nav-link active" id="tab-login-btn" onclick="showAuthForm('loginForm')">Đăng nhập</button>
            </li>
            <li class="nav-item">
              <button class="nav-link" id="tab-register-btn" onclick="showAuthForm('registerForm')">Đăng ký</button>
            </li>
          </ul>

          <!-- Login Form -->
          <div id="loginForm" class="auth-form-container">
            <div class="mb-3 input-group">
              <span class="input-group-text"><i class="bi bi-envelope"></i></span>
              <input type="email" class="form-control" id="loginEmail" placeholder="Email của bạn" autocomplete="email">
            </div>
            <div class="mb-3 input-group">
              <span class="input-group-text"><i class="bi bi-lock"></i></span>
              <input type="password" class="form-control" id="loginPassword" placeholder="Mật khẩu" autocomplete="current-password">
            </div>
            
            <button class="btn btn-primary w-100 mb-3" onclick="handleLogin()">Đăng nhập</button>
            
            <div class="text-center">
              <a href="#" class="text-decoration-none small" onclick="showAuthForm('forgotForm')">Quên mật khẩu?</a>
            </div>
            <div id="loginMessage" class="mt-3 text-danger text-center small"></div>
          </div>

          <!-- Register Form -->
          <div id="registerForm" class="auth-form-container hidden">
            <div class="mb-3 input-group">
              <span class="input-group-text"><i class="bi bi-envelope"></i></span>
              <input type="email" class="form-control" id="regEmail" placeholder="Email đăng ký" autocomplete="email">
            </div>
            <div class="mb-3 input-group">
               <span class="input-group-text"><i class="bi bi-lock"></i></span>
              <input type="password" class="form-control" id="regPassword" placeholder="Mật khẩu (có chữ hoa & số)" autocomplete="new-password">
            </div>
            <div class="mb-3 input-group">
               <span class="input-group-text"><i class="bi bi-check-lg"></i></span>
              <input type="password" class="form-control" id="regPasswordConfirm" placeholder="Nhập lại mật khẩu" autocomplete="new-password">
            </div>
            <button class="btn btn-success w-100" onclick="handleRegistrationRequest()">Đăng ký tài khoản</button>
            <div id="registerMessage" class="mt-3 text-danger text-center small"></div>
          </div>
          
          <!-- Register OTP Form -->
          <div id="registerOtpForm" class="auth-form-container hidden">
              <p class="text-muted small text-center mb-4">Mã xác thực đã gửi đến <strong id="registerOtpEmailDisplay"></strong>.<br>Vui lòng kiểm tra email.</p>
              <div class="mb-3 text-center">
                  <input type="text" class="form-control text-center fs-4 letter-spacing-2" id="registerOtpCode" placeholder="000000" maxlength="6" inputmode="numeric" autocomplete="one-time-code">
              </div>
              <button class="btn btn-primary w-100 mb-2" onclick="handleCompleteRegistration()">Xác thực &amp; Hoàn tất</button>
              <button class="btn btn-link w-100 text-decoration-none text-muted small" onclick="showAuthForm('registerForm')">Quay lại</button>
              <div id="registerOtpMessage" class="mt-3 text-center small"></div>
          </div>

          <!-- Forgot Password Form -->
          <div id="forgotForm" class="auth-form-container hidden">
              <p class="text-muted small mb-3">Nhập email của bạn để nhận mã đặt lại mật khẩu.</p>
              <div class="mb-3 input-group">
                  <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                  <input type="email" class="form-control" id="forgotEmail" placeholder="Email của bạn" autocomplete="email">
              </div>
              <button class="btn btn-warning w-100 mb-2 text-white" onclick="handleForgot()">Gửi mã xác thực</button>
              <button class="btn btn-link w-100 text-decoration-none text-muted small" onclick="showAuthForm('loginForm')">Quay lại Đăng nhập</button>
              <div id="forgotMessage" class="mt-3 text-center small"></div>
          </div>

          <!-- Reset Password Form -->
          <div id="resetForm" class="auth-form-container hidden">
              <p class="text-muted small text-center">Nhập mã OTP từ email <strong id="resetEmailDisplay"></strong> và mật khẩu mới.</p>
              <div class="mb-3">
                  <input type="text" class="form-control text-center" id="otpCode" placeholder="Mã OTP" inputmode="numeric" autocomplete="one-time-code">
              </div>
              <div class="mb-3 input-group">
                  <span class="input-group-text"><i class="bi bi-key"></i></span>
                  <input type="password" class="form-control" id="newPassword" placeholder="Mật khẩu mới" autocomplete="new-password">
              </div>
              <button class="btn btn-info w-100 mb-3 text-white" onclick="handleResetPassword()">Đặt lại mật khẩu</button>
              <div id="resetMessage" class="mt-2 text-center small"></div>
               <div class="d-flex justify-content-between align-items-center mt-3 border-top pt-2">
                  <div id="resendOtpContainer" class="text-muted small"></div>
                  <a href="#" class="text-decoration-none small" onclick="showAuthForm('loginForm')">Quay lại</a>
              </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
  
  <!-- Change Password Modal -->
  <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="changePasswordModalLabel">Đổi mật khẩu</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="currentPassword" class="form-label">Mật khẩu hiện tại</label>
            <input type="password" class="form-control" id="currentPassword" autocomplete="current-password">
          </div>
          <div class="mb-3">
            <label for="changeNewPassword" class="form-label">Mật khẩu mới</label>
            <input type="password" class="form-control" id="changeNewPassword" autocomplete="new-password">
          </div>
          <div class="mb-3">
            <label for="confirmNewPassword" class="form-label">Xác nhận mật khẩu mới</label>
            <input type="password" class="form-control" id="confirmNewPassword" autocomplete="new-password">
          </div>
          <div id="changePasswordMessage" class="mt-3"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
          <button type="button" class="btn btn-primary" onclick="handleChangePassword()">Lưu thay đổi</button>
        </div>
      </div>
    </div>
  </div>

  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="/">Công cụ trực tuyến</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="mainNavItems">
          <li class="nav-item">
            <a class="nav-link" href="qrcode/index.html">Công cụ QR Code</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="photo/index.html">Chỉnh sửa ảnh</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="bhxh1lan/index.html">Tính BHXH 1 lần</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="huutri/index.html">Tính Hưu trí</a>
          </li>
        </ul>
        <div class="d-flex align-items-center ms-auto">
          <div id="userActions">
            <!-- Populated by JS -->
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="px-4 py-5 my-5 text-center">
      <h1 class="display-5 fw-bold text-body-emphasis">Bộ công cụ trực tuyến</h1>
      <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">Chào mừng bạn đến với bộ sưu tập các công cụ hữu ích, miễn phí và hoạt động ngay trên trình duyệt. Chọn một công cụ bên dưới để bắt đầu.</p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6 col-lg-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><i class="bi bi-qr-code-scan me-2"></i>Công cụ Mã QR</h5>
            <p class="card-text flex-grow-1">Tạo và đọc mã QR cho văn bản, URL, WiFi, danh thiếp vCard một cách nhanh chóng và dễ dàng.</p>
            <a href="qrcode/index.html" class="btn btn-primary mt-auto">Sử dụng ngay</a>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><i class="bi bi-image me-2"></i>Trình Chỉnh sửa ảnh</h5>
            <p class="card-text flex-grow-1">Thực hiện các thao tác chỉnh sửa ảnh cơ bản như cắt, xoay, thay đổi kích thước, và làm mờ thông tin nhạy cảm.</p>
            <a href="photo/index.html" class="btn btn-primary mt-auto">Sử dụng ngay</a>
          </div>
        </div>
      </div>
       <div class="col-md-6 col-lg-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><i class="bi bi-calculator me-2"></i>Công cụ tính BHXH 1 lần</h5>
            <p class="card-text flex-grow-1">Ước tính số tiền hưởng bảo hiểm xã hội một lần dựa trên quá trình đóng của bạn một cách chính xác.</p>
            <a href="bhxh1lan/index.html" class="btn btn-primary mt-auto">Sử dụng ngay</a>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><i class="bi bi-person-badge me-2"></i>Công cụ tính Hưu trí</h5>
            <p class="card-text flex-grow-1">Dự tính mức lương hưu hàng tháng bạn có thể nhận được khi đến tuổi nghỉ hưu dựa trên lịch sử đóng BHXH.</p>
            <a href="huutri/index.html" class="btn btn-primary mt-auto">Sử dụng ngay</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/script.js"></script>
</body>
</html>
